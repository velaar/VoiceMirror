{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "Clean, Configure, and Build All",
            "type": "shell",
            "command": "powershell",
            "args": [
                "-NoProfile",
                "-ExecutionPolicy",
                "Bypass",
                "-Command",
                "& {",
                "    # Define build directories",
                "    $buildDirs = @(",
                "        'build\\win-release-x64',",
                "        'build\\win-debug-x64',",
                "        'build\\win-release-x86',",
                "        'build\\win-debug-x86'",
                "    );",
                "",
                "    # Remove each build directory if it exists",
                "    foreach ($dir in $buildDirs) {",
                "        if (Test-Path $dir) {",
                "            Remove-Item -Recurse -Force $dir",
                "            Write-Host \"Removed directory: $dir\"",
                "        } else {",
                "            Write-Host \"Directory does not exist, skipping: $dir\"",
                "        }",
                "    }",
                "",
                "    # Define presets",
                "    $presets = @(",
                "        'win-release-x64',",
                "        'win-debug-x64',",
                "        'win-release-x86',",
                "        'win-debug-x86'",
                "    );",
                "",
                "    # Configure and build each preset",
                "    foreach ($preset in $presets) {",
                "        Write-Host \"Configuring preset: $preset\"",
                "        cmake --preset $preset",
                "        if ($LASTEXITCODE -ne 0) {",
                "            Write-Host \"Configuration failed for preset: $preset\" -ForegroundColor Red",
                "            exit $LASTEXITCODE",
                "        }",
                "",
                "        Write-Host \"Building preset: $preset\"",
                "        cmake --build --preset $preset",
                "        if ($LASTEXITCODE -ne 0) {",
                "            Write-Host \"Build failed for preset: $preset\" -ForegroundColor Red",
                "            exit $LASTEXITCODE",
                "        }",
                "    }",
                "",
                "    Write-Host \"All configurations built successfully.\" -ForegroundColor Green",
                "}"
            ],
            "group": "build",
            "presentation": {
                "reveal": "always",
                "panel": "shared",
                "showReuseMessage": true,
                "clear": false
            },
            "problemMatcher": []
        }
    ]
}
